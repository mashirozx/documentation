<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=/favicon.ico><link rel=stylesheet href=http://docs.joinmastodon.org/style.min.da6b681cd9608c99ab8f7bd6902f5610646e9db147dd3a59bde4b1d9194736cd.css><script src=http://docs.joinmastodon.org/main.min.db37c27117ff8400e5e30549f6806d2bc825668b596d81316c6148417f59bc72.js async></script><title>streaming - Mastodon documentation</title><meta property="og:type" content="article"><meta property="og:url" content="http://docs.joinmastodon.org/methods/timelines/streaming/"><meta name=description content="Subscribe to server-sent events for real-time updates via a long-lived HTTP connection or via WebSocket."><meta property="og:description" content="Subscribe to server-sent events for real-time updates via a long-lived HTTP connection or via WebSocket."><meta name=twitter:description content="Subscribe to server-sent events for real-time updates via a long-lived HTTP connection or via WebSocket."><meta name=twitter:title content="streaming"><meta name=twitter:site content="@MastodonProject"><link rel=canonical href=http://docs.joinmastodon.org/methods/timelines/streaming/></head><body><div class="container sidebar-layout"><nav class=sidebar><a class=brand href=/><img class=link-logo src=/brand.svg alt=Mastodon></a><ul><li><a href=/>What is Mastodon?</a></li><li><span class=sub-title>Using Mastodon</span><ul class=sub-menu><li><a href=/user/signup/>Signing up for an account</a></li><li><a href=/user/profile/>Setting up your profile</a></li><li><a href=/user/posting/>Posting toots</a></li><li><a href=/user/network/>Using the network features</a></li><li><a href=/user/moderating/>Dealing with unwanted content</a></li><li><a href=/user/discoverability/>Promoting yourself and others</a></li><li><a href=/user/preferences/>Set your preferences</a></li><li><a href=/user/contacts/>More settings</a></li><li><a href=/user/external/>Using Mastodon externally</a></li><li><a href=/user/moving/>Moving or leaving accounts</a></li><li><a href=/user/run-your-own/>Running your own server</a></li></ul></li><li><span class=sub-title>Running Mastodon</span><ul class=sub-menu><li><a href=/admin/prerequisites/>Preparing your machine</a></li><li><a href=/admin/install/>Installing from source</a></li><li><a href=/admin/config/>Configuring your environment</a></li><li><a href=/admin/optional/>Installing optional features</a><ul class=sub-menu><li><a href=/admin/optional/elasticsearch/>Full-text search</a></li><li><a href=/admin/optional/tor/>Hidden services</a></li><li><a href=/admin/optional/sso/>Single Sign On</a></li></ul></li><li><a href=/admin/setup/>Setting up your new instance</a></li><li><a href=/admin/tootctl/>Using the admin CLI</a></li><li><a href=/admin/upgrading/>Upgrading to a new release</a></li><li><a href=/admin/backups/>Backing up your server</a></li><li><a href=/admin/migrating/>Migrating to a new machine</a></li><li><a href=/admin/scaling/>Scaling up your server</a></li><li><a href=/admin/moderation/>Moderation actions</a></li><li><a href=/admin/troubleshooting/>Troubleshooting errors</a></li></ul></li><li><span class=sub-title>Developing Mastodon apps</span><ul class=sub-menu><li><a href=/client/intro/>Getting started with the API</a></li><li><a href=/client/public/>Playing with public data</a></li><li><a href=/client/token/>Obtaining client app access</a></li><li><a href=/client/authorized/>Logging in with an account</a></li><li><a href=/client/guidelines/>Guidelines and best practices</a></li><li><a href=/client/libraries/>Libraries and implementations</a></li></ul></li><li><span class=sub-title>Contributing to Mastodon</span><ul class=sub-menu><li><a href=/dev/overview/>Technical overview</a></li><li><a href=/dev/setup/>Setting up a dev environment</a></li><li><a href=/dev/code/>Code structure</a></li><li><a href=/dev/routes/>Routes</a></li><li><a href=/dev/disclosure/>Bug bounties and responsible disclosure</a></li></ul></li><li><span class=sub-title>Spec compliance</span><ul class=sub-menu><li><a href=/spec/activitypub/>ActivityPub</a></li><li><a href=/spec/webfinger/>WebFinger</a></li><li><a href=/spec/security/>Security</a></li><li><a href=/spec/microformats/>Microformats</a></li><li><a href=/spec/oauth/>OAuth</a></li></ul></li><li><span class=sub-title>REST API</span><ul class=sub-menu><li><a href=/api/oauth-scopes/>OAuth Scopes</a></li><li><a href=/api/rate-limits/>Rate limits</a></li></ul></li><li><span class=sub-title>API Methods</span><ul class=sub-menu><li><a href=/methods/apps/>apps</a><ul class=sub-menu><li><a href=/methods/apps/oauth/>oauth</a></li></ul></li><li><a href=/methods/accounts/>accounts</a><ul class=sub-menu><li><a href=/methods/accounts/bookmarks/>bookmarks</a></li><li><a href=/methods/accounts/favourites/>favourites</a></li><li><a href=/methods/accounts/mutes/>mutes</a></li><li><a href=/methods/accounts/blocks/>blocks</a></li><li><a href=/methods/accounts/domain_blocks/>domain_blocks</a></li><li><a href=/methods/accounts/filters/>filters</a></li><li><a href=/methods/accounts/reports/>reports</a></li><li><a href=/methods/accounts/follow_requests/>follow_requests</a></li><li><a href=/methods/accounts/endorsements/>endorsements</a></li><li><a href=/methods/accounts/featured_tags/>featured_tags</a></li><li><a href=/methods/accounts/preferences/>preferences</a></li><li><a href=/methods/accounts/suggestions/>suggestions</a></li></ul></li><li><a href=/methods/statuses/>statuses</a><ul class=sub-menu><li><a href=/methods/statuses/media/>media</a></li><li><a href=/methods/statuses/polls/>polls</a></li><li><a href=/methods/statuses/scheduled_statuses/>scheduled_statuses</a></li></ul></li><li><a href=/methods/timelines/>timelines</a><ul class=sub-menu><li><a href=/methods/timelines/conversations/>conversations</a></li><li><a href=/methods/timelines/lists/>lists</a></li><li><a href=/methods/timelines/markers/>markers</a></li><li><a href=/methods/timelines/streaming/ class=active>streaming</a></li></ul></li><li><a href=/methods/notifications/>notifications</a><ul class=sub-menu><li><a href=/methods/notifications/push/>push</a></li></ul></li><li><a href=/methods/search/>search</a></li><li><a href=/methods/instance/>instance</a><ul class=sub-menu><li><a href=/methods/instance/trends/>trends</a></li><li><a href=/methods/instance/directory/>directory</a></li><li><a href=/methods/instance/custom_emojis/>custom_emojis</a></li></ul></li><li><a href=/methods/admin/>admin</a></li><li><a href=/methods/announcements/>announcements</a></li><li><a href=/methods/proofs/>proofs</a></li><li><a href=/methods/oembed/>oembed</a></li></ul></li><li><span class=sub-title>API Entities</span><ul class=sub-menu><li><a href=/entities/account/>Account</a></li><li><a href=/entities/activity/>Activity</a></li><li><a href=/entities/admin-account/>Admin::Account</a></li><li><a href=/entities/admin-report/>Admin::Report</a></li><li><a href=/entities/announcement/>Announcement</a></li><li><a href=/entities/announcementreaction/>AnnouncementReaction</a></li><li><a href=/entities/application/>Application</a></li><li><a href=/entities/attachment/>Attachment</a></li><li><a href=/entities/card/>Card</a></li><li><a href=/entities/context/>Context</a></li><li><a href=/entities/conversation/>Conversation</a></li><li><a href=/entities/emoji/>Emoji</a></li><li><a href=/entities/error/>Error</a></li><li><a href=/entities/featuredtag/>FeaturedTag</a></li><li><a href=/entities/field/>Field</a></li><li><a href=/entities/filter/>Filter</a></li><li><a href=/entities/history/>History</a></li><li><a href=/entities/identityproof/>IdentityProof</a></li><li><a href=/entities/instance/>Instance</a></li><li><a href=/entities/list/>List</a></li><li><a href=/entities/marker/>Marker</a></li><li><a href=/entities/mention/>Mention</a></li><li><a href=/entities/notification/>Notification</a></li><li><a href=/entities/poll/>Poll</a></li><li><a href=/entities/preferences/>Preferences</a></li><li><a href=/entities/pushsubscription/>PushSubscription</a></li><li><a href=/entities/relationship/>Relationship</a></li><li><a href=/entities/report/>Report</a></li><li><a href=/entities/results/>Results</a></li><li><a href=/entities/scheduledstatus/>ScheduledStatus</a></li><li><a href=/entities/source/>Source</a></li><li><a href=/entities/status/>Status</a></li><li><a href=/entities/tag/>Tag</a></li><li><a href=/entities/token/>Token</a></li></ul></li></ul></nav><main><h1>streaming</h1><p>Subscribe to server-sent events for real-time updates via a long-lived HTTP connection or via WebSocket.</p><aside><nav id=TableOfContents><ul><li><ul><li><a href=#server-sent-events-http>Server-sent events \(HTTP\)</a></li><li><a href=#websocket-a-idwebsocketa>WebSocket</a></li><li><a href=#event-types-a-idevent-typesa>Event types</a></li></ul></li></ul></nav></aside><div class=e-content><p>Your application can use a <a href=https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events>server-sent events</a> endpoint to receive updates in real-time. Server-sent events is an incredibly simple transport method that relies entirely on chunked-encoding transfer, i.e. the HTTP connection is kept open and receives new data periodically.</p><p>Alternatively, a WebSocket connection can also be established.</p><h2 id=server-sent-events-http>Server-sent events (HTTP)</h2><h3 id=endpoints-a-idendpointsa>Endpoints</h3><h4 id=get-apiv1streaminghealth>GET /api/v1/streaming/health</h4><p>Returns <code>OK</code> when streaming service is fine. Added in 2.5.0</p><h4 id=get-apiv1streaminguser>GET /api/v1/streaming/user</h4><p>Returns events that are relevant to the authorized user, i.e. home timeline and notifications</p><h4 id=get-apiv1streamingpublic>GET /api/v1/streaming/public</h4><p>Returns all public statuses</p><h4 id=get-apiv1streamingpubliclocal>GET /api/v1/streaming/public/local</h4><p>Returns all local statuses</p><h4 id=get-apiv1streaminghashtagtaghashtag>GET /api/v1/streaming/hashtag?tag=:hashtag</h4><p>Returns all public statuses for a particular hashtag</p><h4 id=get-apiv1streaminghashtaglocaltaghashtag>GET /api/v1/streaming/hashtag/local?tag=:hashtag</h4><p>Returns all local statuses for a particular hashtag</p><h4 id=get-apiv1streaminglistlistlist-id>GET /api/v1/streaming/list?list=:list_id</h4><p>Returns statuses for a list</p><h4 id=get-apiv1streamingdirect>GET /api/v1/streaming/direct</h4><p>Returns all direct messages</p><h3 id=stream-contents-a-idstream-contentsa>Stream contents</h3><p>The stream will contain events as well as heartbeat comments. Lines that begin with a colon (<code>:</code>) can be ignored by parsers, they are simply there to keep the connection open. Events have this structure:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>event: name
data: payload
</code></pre></div><h2 id=websocket-a-idwebsocketa>WebSocket</h2><p>For WebSockets, there is only one URL path (<code>/api/v1/streaming</code>). The access token as well as the endpoint you are interested in must be provided with query params, respectively <code>access_token</code> and <code>stream</code>. Query params <code>list</code> and <code>tag</code> are likewise supported for relevant endpoints.</p><p>Possible <code>stream</code> values:</p><ul><li><code>user</code></li><li><code>public</code></li><li><code>public:local</code></li><li><code>hashtag</code></li><li><code>hashtag:local</code></li><li><code>list</code></li><li><code>direct</code></li></ul><h2 id=event-types-a-idevent-typesa>Event types</h2><table><thead><tr><th align=left>Event</th><th align=left>Description</th><th align=left>What’s in the payload</th></tr></thead><tbody><tr><td align=left><code>update</code></td><td align=left>A new status has appeared</td><td align=left><a href=/entities/status/>Status</a></td></tr><tr><td align=left><code>notification</code></td><td align=left>A new notification has appeared</td><td align=left><a href=/entities/notification/>Notification</a></td></tr><tr><td align=left><code>delete</code></td><td align=left>A status has been deleted</td><td align=left>ID of the deleted status</td></tr><tr><td align=left><code>filters_changed</code></td><td align=left>Keyword filters have been changed</td><td align=left></td></tr></tbody></table><p>The payload is JSON-encoded.</p><div class="hint hint-info"><div class=hint-icon><i class="fa fa-info-circle"></i></div>In case of <code>filters_changed</code> event, <code>payload</code> is not defined.</div><p style=color:#687590>Last updated May 6, 2020 · <a href=https://github.com/tootsuite/documentation/tree/master/content/en/methods/timelines/streaming.md style=color:#687590>Improve this page</a></p></div></main></div><footer class="footer container"><a href=https://designbyhumans.com/shop/mastodon class=panel style=background-image:url(/shirt.png)><div class=overlay><h5>Merch</h5><p>T-shirts and stickers</p></div></a><p class="legal legal--right"><a href=https://joinmastodon.org>Join Mastodon</a> · <a href=https://blog.joinmastodon.org>Blog</a> · <a href=https://mastodon.social/@Mastodon target=_blank><i class="fab fa-mastodon"></i></a>· <a href=https://twitter.com/MastodonProject rel=nofollow target=_blank><i class="fab fa-twitter"></i></a></p><p class=legal><a href=https://github.com/tootsuite/documentation/tree/master/content/en/methods/timelines/streaming.md>View source</a> · <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA 4.0</a> · <a href=https://joinmastodon.org/imprint>Imprint</a></p></footer></body></html>