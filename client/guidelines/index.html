<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=/favicon.ico><link rel=stylesheet href=http://docs.joinmastodon.org/style.min.da6b681cd9608c99ab8f7bd6902f5610646e9db147dd3a59bde4b1d9194736cd.css><script src=http://docs.joinmastodon.org/main.min.db37c27117ff8400e5e30549f6806d2bc825668b596d81316c6148417f59bc72.js async></script><title>Guidelines and best practices - Mastodon documentation</title><meta property="og:type" content="article"><meta property="og:url" content="http://docs.joinmastodon.org/client/guidelines/"><meta name=description content="Things to keep in mind when implementing a Mastodon app."><meta property="og:description" content="Things to keep in mind when implementing a Mastodon app."><meta name=twitter:description content="Things to keep in mind when implementing a Mastodon app."><meta name=twitter:title content="Guidelines and best practices"><meta name=twitter:site content="@MastodonProject"><link rel=canonical href=http://docs.joinmastodon.org/client/guidelines/></head><body><div class="container sidebar-layout"><nav class=sidebar><a class=brand href=/><img class=link-logo src=/brand.svg alt=Mastodon></a><ul><li><a href=/>What is Mastodon?</a></li><li><span class=sub-title>Using Mastodon</span><ul class=sub-menu><li><a href=/user/signup/>Signing up for an account</a></li><li><a href=/user/profile/>Setting up your profile</a></li><li><a href=/user/posting/>Posting toots</a></li><li><a href=/user/network/>Using the network features</a></li><li><a href=/user/moderating/>Dealing with unwanted content</a></li><li><a href=/user/discoverability/>Promoting yourself and others</a></li><li><a href=/user/preferences/>Set your preferences</a></li><li><a href=/user/contacts/>More settings</a></li><li><a href=/user/external/>Using Mastodon externally</a></li><li><a href=/user/moving/>Moving or leaving accounts</a></li><li><a href=/user/run-your-own/>Running your own server</a></li></ul></li><li><span class=sub-title>Running Mastodon</span><ul class=sub-menu><li><a href=/admin/prerequisites/>Preparing your machine</a></li><li><a href=/admin/install/>Installing from source</a></li><li><a href=/admin/config/>Configuring your environment</a></li><li><a href=/admin/optional/>Installing optional features</a><ul class=sub-menu><li><a href=/admin/optional/elasticsearch/>Full-text search</a></li><li><a href=/admin/optional/tor/>Hidden services</a></li><li><a href=/admin/optional/sso/>Single Sign On</a></li></ul></li><li><a href=/admin/setup/>Setting up your new instance</a></li><li><a href=/admin/tootctl/>Using the admin CLI</a></li><li><a href=/admin/upgrading/>Upgrading to a new release</a></li><li><a href=/admin/backups/>Backing up your server</a></li><li><a href=/admin/migrating/>Migrating to a new machine</a></li><li><a href=/admin/scaling/>Scaling up your server</a></li><li><a href=/admin/moderation/>Moderation actions</a></li><li><a href=/admin/troubleshooting/>Troubleshooting errors</a></li></ul></li><li><span class=sub-title>Developing Mastodon apps</span><ul class=sub-menu><li><a href=/client/intro/>Getting started with the API</a></li><li><a href=/client/public/>Playing with public data</a></li><li><a href=/client/token/>Obtaining client app access</a></li><li><a href=/client/authorized/>Logging in with an account</a></li><li><a href=/client/guidelines/ class=active>Guidelines and best practices</a></li><li><a href=/client/libraries/>Libraries and implementations</a></li></ul></li><li><span class=sub-title>Contributing to Mastodon</span><ul class=sub-menu><li><a href=/dev/overview/>Technical overview</a></li><li><a href=/dev/setup/>Setting up a dev environment</a></li><li><a href=/dev/code/>Code structure</a></li><li><a href=/dev/routes/>Routes</a></li><li><a href=/dev/disclosure/>Bug bounties and responsible disclosure</a></li></ul></li><li><span class=sub-title>Spec compliance</span><ul class=sub-menu><li><a href=/spec/activitypub/>ActivityPub</a></li><li><a href=/spec/webfinger/>WebFinger</a></li><li><a href=/spec/security/>Security</a></li><li><a href=/spec/microformats/>Microformats</a></li><li><a href=/spec/oauth/>OAuth</a></li></ul></li><li><span class=sub-title>REST API</span><ul class=sub-menu><li><a href=/api/oauth-scopes/>OAuth Scopes</a></li><li><a href=/api/rate-limits/>Rate limits</a></li></ul></li><li><span class=sub-title>API Methods</span><ul class=sub-menu><li><a href=/methods/apps/>apps</a><ul class=sub-menu><li><a href=/methods/apps/oauth/>oauth</a></li></ul></li><li><a href=/methods/accounts/>accounts</a><ul class=sub-menu><li><a href=/methods/accounts/bookmarks/>bookmarks</a></li><li><a href=/methods/accounts/favourites/>favourites</a></li><li><a href=/methods/accounts/mutes/>mutes</a></li><li><a href=/methods/accounts/blocks/>blocks</a></li><li><a href=/methods/accounts/domain_blocks/>domain_blocks</a></li><li><a href=/methods/accounts/filters/>filters</a></li><li><a href=/methods/accounts/reports/>reports</a></li><li><a href=/methods/accounts/follow_requests/>follow_requests</a></li><li><a href=/methods/accounts/endorsements/>endorsements</a></li><li><a href=/methods/accounts/featured_tags/>featured_tags</a></li><li><a href=/methods/accounts/preferences/>preferences</a></li><li><a href=/methods/accounts/suggestions/>suggestions</a></li></ul></li><li><a href=/methods/statuses/>statuses</a><ul class=sub-menu><li><a href=/methods/statuses/media/>media</a></li><li><a href=/methods/statuses/polls/>polls</a></li><li><a href=/methods/statuses/scheduled_statuses/>scheduled_statuses</a></li></ul></li><li><a href=/methods/timelines/>timelines</a><ul class=sub-menu><li><a href=/methods/timelines/conversations/>conversations</a></li><li><a href=/methods/timelines/lists/>lists</a></li><li><a href=/methods/timelines/markers/>markers</a></li><li><a href=/methods/timelines/streaming/>streaming</a></li></ul></li><li><a href=/methods/notifications/>notifications</a><ul class=sub-menu><li><a href=/methods/notifications/push/>push</a></li></ul></li><li><a href=/methods/search/>search</a></li><li><a href=/methods/instance/>instance</a><ul class=sub-menu><li><a href=/methods/instance/trends/>trends</a></li><li><a href=/methods/instance/directory/>directory</a></li><li><a href=/methods/instance/custom_emojis/>custom_emojis</a></li></ul></li><li><a href=/methods/admin/>admin</a></li><li><a href=/methods/announcements/>announcements</a></li><li><a href=/methods/proofs/>proofs</a></li><li><a href=/methods/oembed/>oembed</a></li></ul></li><li><span class=sub-title>API Entities</span><ul class=sub-menu><li><a href=/entities/account/>Account</a></li><li><a href=/entities/activity/>Activity</a></li><li><a href=/entities/admin-account/>Admin::Account</a></li><li><a href=/entities/admin-report/>Admin::Report</a></li><li><a href=/entities/announcement/>Announcement</a></li><li><a href=/entities/announcementreaction/>AnnouncementReaction</a></li><li><a href=/entities/application/>Application</a></li><li><a href=/entities/attachment/>Attachment</a></li><li><a href=/entities/card/>Card</a></li><li><a href=/entities/context/>Context</a></li><li><a href=/entities/conversation/>Conversation</a></li><li><a href=/entities/emoji/>Emoji</a></li><li><a href=/entities/error/>Error</a></li><li><a href=/entities/featuredtag/>FeaturedTag</a></li><li><a href=/entities/field/>Field</a></li><li><a href=/entities/filter/>Filter</a></li><li><a href=/entities/history/>History</a></li><li><a href=/entities/identityproof/>IdentityProof</a></li><li><a href=/entities/instance/>Instance</a></li><li><a href=/entities/list/>List</a></li><li><a href=/entities/marker/>Marker</a></li><li><a href=/entities/mention/>Mention</a></li><li><a href=/entities/notification/>Notification</a></li><li><a href=/entities/poll/>Poll</a></li><li><a href=/entities/preferences/>Preferences</a></li><li><a href=/entities/pushsubscription/>PushSubscription</a></li><li><a href=/entities/relationship/>Relationship</a></li><li><a href=/entities/report/>Report</a></li><li><a href=/entities/results/>Results</a></li><li><a href=/entities/scheduledstatus/>ScheduledStatus</a></li><li><a href=/entities/source/>Source</a></li><li><a href=/entities/status/>Status</a></li><li><a href=/entities/tag/>Tag</a></li><li><a href=/entities/token/>Token</a></li></ul></li></ul></nav><main><h1>Guidelines and best practices</h1><p>Things to keep in mind when implementing a Mastodon app.</p><aside><nav id=TableOfContents><ul><li><ul><li><a href=#login>Login</a></li><li><a href=#username>Usernames</a></li><li><a href=#id>Handling and sorting IDs</a></li><li><a href=#formatting>Formatting</a></li><li><a href=#filters>Filters</a></li></ul></li></ul></nav></aside><div class=e-content><h2 id=login>Login</h2><p><strong>The user must be able to login to any Mastodon server from the app</strong>. This means you must ask for the server's domain and use the app registrations API to dynamically obtain OAuth2 credentials.</p><h2 id=username>Usernames</h2><p><strong>Decentralization must be transparent to the user</strong>. It should be possible to see that a given user is from another server, by e.g. displaying their <code>acct</code> somewhere. Note that <code>acct</code> is equal to username for local users, and equal to username@domain for remote users.</p><h2 id=id>Handling and sorting IDs</h2><p>Vanilla Mastodon entity IDs are generated as integers and cast to string. However, this does not mean that IDs <em>are</em> integers, nor should they be cast to integer! Doing so can lead to broken client apps due to integer overflow, so <strong>always treat IDs as strings.</strong></p><p>With that said, because IDs are string representations of numbers, they can still be sorted chronologically very easily by doing the following:</p><ol><li>Sort by size. Newer statuses will have longer IDs.</li><li>Sort lexically. Newer statuses will have at least one digit that is higher when compared positionally.</li></ol><h2 id=formatting>Formatting</h2><p>Plain text is not available for content from remote servers, and plain text syntax rules may vary wildly between Mastodon and other fediverse applications. For certain attributes, such as the content of statuses, <strong>Mastodon provides sanitized HTML</strong>. You may expect these tags to appear in the content: <code>&lt;p></code>, <code>&lt;br></code>, <code>&lt;span></code>, <code>&lt;a></code>. See <a href=../spec/activitypub.md#html-sanitization>HTML Sanitization</a> for more details.</p><h3 id=tags>Mentions, hashtags, and custom emoji</h3><p>Mentions and hashtags are <code>&lt;a></code> tags. Custom emoji remain in their plain text shortcode form. To give those entities their semantic meaning and add special handling, such as opening a mentioned profile within your app instead of as a web page, metadata is included with the <a href=/entities/status/>Status</a>, which can be matched to a particular tag. See <a href=../entities/status.md#rendering-attributes>Status > Rendering attributes</a> for more information.</p><h3 id=links>Link shortening</h3><p>Links in Mastodon are not shortened using URL shorteners, and the usage of URL shorteners is heavily discouraged. URLs in text always count for 23 characters, and are intended to be shortened visually. For that purpose, a link is marked up like this:</p><pre><code class=language-markup data-lang=markup>&lt;a href=&quot;https://example.com/page/that/is/very/long&quot;&gt;
  &lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;
  &lt;span class=&quot;ellipsis&quot;&gt;example.com/page&lt;/span&gt;
  &lt;span class=&quot;invisible&quot;&gt;/that/is/very/long&lt;/span&gt;
&lt;/a&gt;
</code></pre><p>The spans with the <code>invisible</code> class can be hidden. The middle span is intended to remain visible. It may have no class if the URL is not very long, otherwise it will have an <code>ellipsis</code> class. No ellipsis (<code>…</code>) character is inserted in the markup, instead, you are expected to insert it yourself if you need it in your app.</p><h2 id=filters>Filters</h2><p>Clients must do their own text filtering based on filters returned from the API. The server will apply <code>irreversible</code> filters for home and notifications context, but anything else is still up to the client to filter!</p><p>Expired filters are not deleted by the server. They should no longer be applied but they are still stored by the server, as users may update the expiry time to re-enable the filter. It is up to users to delete those filters eventually.</p><p style=color:#687590>Last updated January 12, 2020 · <a href=https://github.com/tootsuite/documentation/tree/master/content/en/client/guidelines.md style=color:#687590>Improve this page</a></p></div></main></div><footer class="footer container"><a href=https://designbyhumans.com/shop/mastodon class=panel style=background-image:url(/shirt.png)><div class=overlay><h5>Merch</h5><p>T-shirts and stickers</p></div></a><p class="legal legal--right"><a href=https://joinmastodon.org>Join Mastodon</a> · <a href=https://blog.joinmastodon.org>Blog</a> · <a href=https://mastodon.social/@Mastodon target=_blank><i class="fab fa-mastodon"></i></a>· <a href=https://twitter.com/MastodonProject rel=nofollow target=_blank><i class="fab fa-twitter"></i></a></p><p class=legal><a href=https://github.com/tootsuite/documentation/tree/master/content/en/client/guidelines.md>View source</a> · <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA 4.0</a> · <a href=https://joinmastodon.org/imprint>Imprint</a></p></footer></body></html>